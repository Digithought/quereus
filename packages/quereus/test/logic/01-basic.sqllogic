-- Test the basics of create and select

CREATE TABLE t (a TEXT, b INTEGER);
INSERT INTO t VALUES ('a', 10);

select a, b from t;
→ [{"a": "a", "b": 10}]

DROP TABLE t;

-- Test CREATE TABLE IF NOT EXISTS

CREATE TABLE IF NOT EXISTS t1 (id INTEGER PRIMARY KEY, name TEXT);

-- Insert a row to verify the table was created
INSERT INTO t1 VALUES (1, 'Alice');

SELECT * FROM t1;
→ [{"id": 1, "name": "Alice"}]

-- Second CREATE TABLE IF NOT EXISTS should be a no-op (not error)
CREATE TABLE IF NOT EXISTS t1 (id INTEGER PRIMARY KEY, name TEXT);

-- Verify original data is still there (not reset)
SELECT * FROM t1;
→ [{"id": 1, "name": "Alice"}]

-- Insert another row to confirm table still works
INSERT INTO t1 VALUES (2, 'Bob');

SELECT * FROM t1 ORDER BY id;
→ [{"id": 1, "name": "Alice"}, {"id": 2, "name": "Bob"}]

DROP TABLE t1;

-- Test that CREATE TABLE without IF NOT EXISTS errors when table exists
CREATE TABLE t2 (x INTEGER);
CREATE TABLE t2 (x INTEGER);
-- error: already exists
