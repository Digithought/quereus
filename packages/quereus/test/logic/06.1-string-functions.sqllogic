-- string-functions.sqllogic - Testing string functions not covered in 06-builtin_functions

-- trim with custom characters
select trim('xxhelloxx', 'x');
â†’ [{"trim('xxhelloxx', 'x')":"hello"}]

-- ltrim and rtrim (whitespace)
select ltrim('  hello'), rtrim('hello  ');
â†’ [{"ltrim('  hello')":"hello","rtrim('hello  ')":"hello"}]

-- ltrim and rtrim with custom characters
select ltrim('xxhello', 'x'), rtrim('helloxx', 'x');
â†’ [{"ltrim('xxhello', 'x')":"hello","rtrim('helloxx', 'x')":"hello"}]

-- replace
select replace('hello world', 'world', 'quereus');
â†’ [{"replace('hello world', 'world', 'quereus')":"hello quereus"}]

-- replace with empty pattern returns original string
select replace('hello', '', 'x');
â†’ [{"replace('hello', '', 'x')":"hello"}]

-- instr (1-based position for found, 0 for not found)
select instr('hello world', 'world');
â†’ [{"instr('hello world', 'world')":7}]

select instr('hello', 'xyz');
â†’ [{"instr('hello', 'xyz')":0}]

-- instr NULL propagation
select instr(null, 'x'), instr('hello', null);
â†’ [{"instr(null, 'x')":null,"instr('hello', null)":null}]

-- reverse
select reverse('hello');
â†’ [{"reverse('hello')":"olleh"}]

-- reverse preserves characters
select reverse('abc');
â†’ [{"reverse('abc')":"cba"}]

-- reverse with emoji (tests Array.from handling)
select reverse('aðŸ˜€b');
â†’ [{"reverse('aðŸ˜€b')":"bðŸ˜€a"}]

-- lpad
select lpad('hi', 5, '*');
â†’ [{"lpad('hi', 5, '*')":"***hi"}]

-- rpad
select rpad('hi', 5, '*');
â†’ [{"rpad('hi', 5, '*')":"hi***"}]

-- lpad with multi-char pad
select lpad('hi', 7, 'ab');
â†’ [{"lpad('hi', 7, 'ab')":"ababahi"}]

-- lpad when string already longer than target
select lpad('hello', 3, '*');
â†’ [{"lpad('hello', 3, '*')":"hello"}]

-- lpad with empty pad returns original string
select lpad('hi', 5, '');
â†’ [{"lpad('hi', 5, '')":"hi"}]

-- NULL propagation for string functions
select lower(null), upper(null), length(null), trim(null), replace(null, 'a', 'b');
â†’ [{"lower(null)":null,"upper(null)":null,"length(null)":null,"trim(null)":null,"replace(null, 'a', 'b')":null}]

-- trim with no characters to remove
select trim('hello', 'x');
â†’ [{"trim('hello', 'x')":"hello"}]

-- ltrim/rtrim with null
select ltrim(null), rtrim(null);
â†’ [{"ltrim(null)":null,"rtrim(null)":null}]

-- reverse of empty string returns empty string
select reverse('');
â†’ [{"reverse('')":""}]

-- replace multiple occurrences
select replace('aabbcc', 'b', 'x');
â†’ [{"replace('aabbcc', 'b', 'x')":"aaxxcc"}]

-- instr with empty substring
select instr('hello', '');
â†’ [{"instr('hello', '')":0}]

-- instr with empty string
select instr('', 'a');
â†’ [{"instr('', 'a')":0}]
