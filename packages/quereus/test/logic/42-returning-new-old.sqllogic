-- returning-new-old.sqllogic - Testing NEW/OLD qualifiers in RETURNING clauses

PRAGMA default_vtab_module='memory';

-- Create test table
CREATE TABLE test_table (
    id INTEGER PRIMARY KEY,
    value TEXT
);

-- Insert initial data
INSERT INTO test_table VALUES (1, 'original');
SELECT * FROM test_table;
→ [{"id":1,"value":"original"}]

-- Test UPDATE RETURNING with OLD qualifier (should show original value)
UPDATE test_table SET value = 'updated' WHERE id = 1 RETURNING OLD.value;
→ [{"OLD.value":"original"}]

-- Verify the update actually happened
SELECT * FROM test_table;
→ [{"id":1,"value":"updated"}]

DROP TABLE test_table;